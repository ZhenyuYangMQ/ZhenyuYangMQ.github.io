<!-- each category page -->

{% if page.type%}
<div class="archive">
  <p class="archive_type">{{ page.type }}</p>
  <ul>
  {% for post in site.posts %}
  {% if post.categories contains "Publications" and post.image %}
  {% unless post.next %}
  <p class="archive_year">{{ post.date | date: '%Y' }}</p>
  {% else %}
  {% capture year %}{{ post.date | date: '%Y' }}{% endcapture %}
  {% capture nextyear %}{{ post.next.date | date: '%Y' }}{% endcapture %}
  {% if year != nextyear %}
  <p class="archive_year">{{ post.date | date: '%Y' }}</p>
  {% endif %}
  {% endunless %}

  <ul class="publication-list-category">  
      <li class="publication-item-category"> 
          <div class="publication-image-wrapper"> 
            <img src="{{ post.image | relative_url }}" alt="{{ post.title | escape }} thumbnail">
          </div>
        <div class="publication-text-content"> 
          <div class='archive_title'>
            <a href='{{ post.url | relative_url }}'>
              {{ post.title | escape }}
            </a>
          </div>
          <div class='archive_title'>
            {{ post.authors | escape }}
          </div>
           <div class='archive_title'>
            {% comment %} 开始处理会议名称格式 {% endcomment %}
            {% assign venue_full_string = post.venues %}
            {% assign publication_year = post.date | date: '%Y' %}

            {% assign open_paren_index = venue_full_string | indexOf: '(' %}

            {% if open_paren_index != nil and open_paren_index >= 0 %}
              {% comment %} 如果包含括号，提取简写和等级 {% endcomment %}
              {% assign venue_acronym_raw = venue_full_string | slice: 0, open_paren_index %}
              {% assign venue_acronym = venue_acronym_raw | strip %}

              {% assign close_paren_index = venue_full_string | indexOf: ')' %}
              {% if close_paren_index != nil and close_paren_index > open_paren_index %}
                {% assign venue_rank = venue_full_string | slice: open_paren_index, close_paren_index | replace: '(', '' | replace: ')', '' | strip %}
              {% else %}
                {% assign venue_rank = '' %} {% comment %} 如果没有找到闭括号，等级为空 {% endcomment %}
              {% endif %}
            {% else %}
              {% comment %} 如果不包含括号，整个字符串就是简写，等级为空 {% endcomment %}
              {% assign venue_acronym = venue_full_string | strip %}
              {% assign venue_rank = '' %}
            {% endif %}

            {% comment %} 从 _data/venues.yml 中查找全称 {% endcomment %}
            {% assign full_venue_name = site.data.venues[venue_acronym] %}

            {{ venue_acronym }} {{ publication_year }}
            {% if venue_rank != '' %}
              ({{ venue_rank }})
            {% endif %}
            {% if full_venue_name %}
              : {{ full_venue_name }}
            {% endif %}
            {% comment %} 结束处理会议名称格式 {% endcomment %}
          </div>
        </div>
      </li>
    </ul>
    {% endif %}
  {% endfor %}

  </ul>
</div>

<!-- main page -->
{% else %}
<div class="archive">
  <div class="archive_title">
  <div>
    <img alt="image" style="width:130px;float:left;margin-bottom:20px;margin-right:20px;" src="/assets/img/photo.jpg">
  </div>
  <div>
  <h2><b>BIOGRAPHY</b></h2>
    <div>	  <!-- style="width:535px"-->
    Zhenyu Yang is currently a Ph.D. student with the <a href='https://www.mq.edu.au/faculty-of-science-and-engineering/departments-and-schools/school-of-computing'> School of Computing at Macquarie University</a>, supervised by <a href='http://web.science.mq.edu.au/~jiawu/'> A/Prof. Jia Wu</a>. His research interest is to develop ML algorithms over graph-structured data for addressing real-world problems, especially fraud detection and anomaly detection. Previously, he received his Master's degree in the School of Computing at Macquarie University.
    </div>	    
  </div>

    <div class="archive_section"> <div>
      <h2><b>NEWS</b></h2>
    </div>

     <ul>
    {% for post in site.posts %}
      {% assign year = post.date | date: '%Y' %}
      {% assign month = post.date | date: '%m' %}

      {% if post.categories contains "Awards" and post.awards and post.date %} 
        <li>
          <div class='archive_title'>
            {{ year }}/{{ month }}: Awarded the 
              {% if post.link %} 
              <a href='{{ post.link | escape }}' target="_blank">{{ post.awards | escape }}</a>             
	      {% else %}
              {{ post.awards | escape }} 
            {% endif %}
	   by {{ post.venues | escape }} {{ year }}.
          </div>
        </li>

      {% elsif post.categories contains "Publications" and post.venues and post.date and post.title %} 
        {% assign clean_venues = post.venues | split: "(" | first | strip %}
        <li>
          <div class='archive_title'>
            {{ year }}/{{ month }}: Our paper on <a href='{{ post.url | relative_url }}'>{{ post.title | escape }}</a> has been accepted by {{ clean_venues | escape }} {{ year }}.
          </div>
        </li>
      {% endif %}
    {% endfor %}
  </ul>
  </div>
   
  <div class="archive_title">
  <div>
  <h2><b>PUBLICATIONS</b></h2>
  </div>

  {% for post in site.posts %}
  {% if post.categories contains "Publications" %}
  {% unless post.next %}
  <p class="archive_year">{{ post.date | date: '%Y' }}</p>
  {% else %}
  {% capture year %}{{ post.date | date: '%Y' }}{% endcapture %}
  {% capture nextyear %}{{ post.next.date | date: '%Y' }}{% endcapture %}
  {% if year != nextyear %}
  <p class="archive_year">{{ post.date | date: '%Y' }}</p>
  {% endif %}
  {% endunless %}

  <ul>  <!-- style="width:800px"-->
    <li>  <!-- style="width:660px"-->
      <!--<time class='archive_date' datetime='{{ post.date | date_to_xmlschema }}'>
        {{ post.date | date: "%b %d" }}
      </time>-->
      <div class='archive_title'>
        <a href='{{ post.url | relative_url }}'>
          {{ post.title | escape }}
        </a>
      </div>
      <div class='archive_title'>
	{{ post.authors | escape }}
      </div>
	  <div class='archive_title'>
	{{ post.venues | escape }}
	  </div>
    </li>
  </ul>
  {% endif %}
  {% endfor %}

</div><div class="archive_section"> <div>
      <h2><b>AWARDS</b></h2>
    </div>

    <ul>
      {% for post in site.posts %}
        {% if post.categories contains "Awards" and post.venues and post.awards %}
          <li>
            <div class='archive_title'> •
              {% if post.link %} 
              <a href='{{ post.link | escape }}' target="_blank">{{ post.awards | escape }}</a>.             
              {% else %}
              {{ post.awards | escape }}. 
            {% endif %}
	    </div>
            <div class='archive_title'> 
              &nbsp;&nbsp;&ndash;&ndash; {{ post.venues | escape }}, {{ post.date | date: '%Y' }} </div>
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  </div>

</div>
{% endif %}
